version: 2

sources:
  - name: salesforce_production
    description: Main CRM

    freshness:
      warn_after:
        period: hour
        count: 12
      error_after:
        period: hour
        count: 24

    tables:
      - name: stg_salesforce_account
        columns:
          - name: id
            description: Unique Identifier Generated by Salesforce for the Account
            tests:
              - unique
              - not_null
          - name: name
            description: salesforce account name
          - name: isdeleted
            description: If the account is deleted or not, currently all accounts have this value as FALSE
          - name: type
            description: 'prospect/customer/former customer/etc. '
          - name: parentid
            description: salesforce account id of the parent company
          - name: phone
            description: firmographics information, enriched by zoominfo/clearbit
          - name: industry
            description: industry of the account
          - name: employee_segment__c
            description: based on size of company - Commercial (>=200), Emerging (0 to 200), Unknown (number of employees is blank)
          - name: numberofemployees
            description: Number of employees in the account company, used to populate employee_segment_c
          - name: annualrevenue
            description: annual revenue of the company
          - name: ownerid
            description: Salesforce id of the owner of the account, id of an Vidyard account executive, not a user
            tests:
              - unique
              - not_null
          - name: customer_tier__c
            description: Customer tiers assigned by CX
          - name: email_domain__c
            description: domain of the company
          - name: website
            description: website address of the account company
          - name: account_id__c
            description: vidyard account id
            tests:
              - unique
              - not_null
          - name: original_contract_date__c
            description: start date of the original contract of the account with Vidyard
          - name: csm_owner__c
            description: salesforce user id of the CSM owner for the account
            tests:
              - unique
              - not_null            
          - name: ispersonaccount
            description: T/F; True if self-serve, False if enterprise customer
          - name: self_serve_customer__c
            description: whether a customer is self-serve or not; based on the most recent oppotunity the account closed with VY, not accurate for customers with active contracts AND active self serve; used to be used for HubSpot customers; legacy field probably
          - name: billingstreet
            description: 'billing street of the company '
          - name: billingcity
            description: billing city of the account company
          - name: billingstate
            description: billing state of the account company
          - name: billingpostalcode
            description: billing postal code of the account company
          - name: billingcountry
            description: billing country of the account company
          - name: ispartner
            description: If the account is a Vidyard partner or not
          - name: date_of_churn__c
            description: date when customers churn
          - name: churn_reason__c
            description: reason of churn for customers
          - name: churn_reason_details__c
            description: details reasons of churns for customers
          - name: partner_type2__c
            description: Type of partners
          - name: zvidyard_Account_Products__c
            description: description of the typ of product the account is under; used to calculate many boolean fields for type of the account(for enterprise, for business, for teams, etc)
          - name: created_datetime__c
            description: date and time of when the account was created
          - name: new_territory__c
            description: 'Refers to sales reps'' territories: sub-categories under commercial and emerging. What category does the account fall under size wise for the reps to work on. e.g. LE = Large Enterprise; KA = Key Accounts'
          - name: region__c
            description: the region the account is from; picklist in Salesforce - NA East, NA West, NA Unknown, EMEA, APAC, LATAM
          - name: non_contract__c
            description: really really old customers who paid us by credit card, but not self serve; legacy field
          - name: vidyard_user_id__pc
            description: vidyard user id
          - name: crm__c
            description: CRM tool the account uses
          - name: marketing_automation_platform__c
            description: the marketing automation platform used by the acconut
          - name: abm_tier__c
            description: customer tier in ABM program
          - name: online_video_platform__c
            description: online video platform used by the account
          - name: non_contract__c
            description: really really old customers who paid us by credit card, but not self serve; legacy
          - name: primary_use_case__c
            description: the account's primary use case for vidyard (e.g. corporate comms, hosting, sales etc)
          - name: qa_status__c
            description: status of an account that has been deemed qualified to act on by marketing (via a picklist)

models:
  - name: stg_salesforce_account
    columns:
      - name: accountId
        tests:
          - unique
          - not_null
      - name: accountName
      - name: isDeleted
      - name: accountType
      - name: parentAccountId
      - name: accountPhone
      - name: accountIndustry
      - name: employeeSegment
      - name: numberOfEmployees
      - name: annualRevenue
      - name: ownerId
        tests:
          - unique
          - not_null
      - name: customerTier
      - name: emailDomain
      - name: website
      - name: vidyardAccountId
        tests:
          - unique
          - not_null
      - name: originalContractDate
      - name: csmOwnerId
        tests:
          - unique
          - not_null
      - name: isPersonAccount
      - name: isSelfServe
      - name: billingStreet
      - name: billingCity
      - name: billingState
      - name: billingPostalCode
      - name: billingCountry
      - name: isPartner
      - name: dateOfChurn
      - name: churnReason
      - name: churnReasonDetails
      - name: partnerType
      - name: vidyardAccountProducts
      - name: createdDate
      - name: accountTerritory
      - name: accountRegion
      - name: nonContract
      - name: vidyardUserId
      - name: crmPlatform
      - name: marketingAutomationPlatform
      - name: abmTier
      - name: onlineVideoPlatform
      - name: nonContract
      - name: primaryUseCase
      - name: qaStatus