version: 2

sources:
  - name: salesforce_production
    description: Main CRM
    
    freshness:
      warn_after:
        period: hour
        count: 12
      error_after:
        period: hour
        count: 24

    tables:

      - name: opportunity

      - name: account

      - name: contact

      - name: campaign
      

models:
  # Documentation for Staging Opportunity table
  - name: stg_salesforce_opportunity
    columns:
      - name: opportunityId
        description: salesforce opportunity id
        tests:
          - unique
          - not_null

      - name: accountId
        description: salesforce account id tied to this opportunity
        tests:
          - unique
          - not_null

      - name: ownerId
        description: Salesforce user id who owns the opportunity , id of a Vidyard person, not a user
        tests:
          - unique
          - not_null

      - name: opportunityName
        description: Name of the Opportunity in Salesforce

      - name: stageName
        description: where the opportunity is in the sales funnel (stage 1 to 7, dead)

      - name: closeDate
        description: close date of the opportunity (either won or dead out), used for pipeline purposes

      - name: opportunityType
        description: opportunity type - new business, add-on, renewal, etc

      - name: isClosed
        description: T/F, opportunity is close - won or dead

      - name: isWon
        description: T/F, opportunity is won

      - name: campaignId
        description: salesforce campaign that brought the opportunity

      - name: createdDate
        description: opportunity created date

      - name: enteredPipelineDate
        description: opportunity entered pipeline date

      - name: deadReason
        description: the reason for an opportunity to be deaded out             

      - name: closedWonDate
        description: date when the opportunity is marked closed-won by the salesperson; used for commission purposes

      - name: deadDate
        description: date when the opportunity is deaded out

      - name: renewalDueDate
        description: date when the next renewal is due

      - name: multiYear1stDueDate
        description: for a multi-year contract, the first year's renewal duedate

      - name: multiYear2ndDueDate
        description: for a multi-year contract, the second year's renewal due date

      - name: contactChampionId
        description: the main contact for the opportunity in the customer company 
        tests:
          - unique
          - not_null
          
      - name: businessUnit
        description: whether the opportunity is coming from commercial or emerging business

      - name: opportunityAttribution
        description: where the opportunity is attributed to

      - name: newARR
        description: arr amount for the opportunity, enterprise contract only! not including self serve

      - name: oneTimeCharge
        description: one time charge fee on the opportunity

      - name: lastYearARR
        description: arr charged from last year, used as renewal target for this year

      - name: renewalAmount
        description: renewal amount

      - name: csmOwnerId
        description: Salesforce ID of the CSM owners of the opportunity

      - name: contractStartDate
        description: Start date of current contract

      - name: contractEndDate
        description: end date of current contract

      - name: previousContractStartDate
        description: start date of last contract

      - name: previousContractEndDate
        description: end date of last contract

      - name: churnReason
        description: reason opportunity/account is churning

      - name: competitor
        description: potential competitor being evaluated/used by prospect

      - name: forecastCategory
        description: a list of values to pick from that CX uses for reporting - omitted, pipeline, best case, commit, closed

      - name: redOpportunity
        description: T/F for labeling if the opportunity is Red Opportunity or not

      - name: Assurance
        description: positive - confirmed to renew; negative - haven't heard from them, but will auto-renew; sales order

  - name: stg_salesforce_account
    columns:
      - name: id
        description: Unique Identifier Generated by Salesforce for the Account
        tests:
          - unique
          - not_null

      - name: name
        description: salesforce account name

      - name: isdeleted
        description: If the account is deleted or not, currently all accounts have this value as FALSE

      - name: type
        description: prospect/customer/former customer/etc.

      - name: parentid
        description: salesforce account id of the parent company

      - name: phone
        description: firmographics information, enriched by zoominfo/clearbit

      - name: industry
        description: industry of the account

      - name: employee_segment__c
        description: based on size of company - Commercial (>=200), Emerging (0 to 200), Unknown (number of employees is blank)

      - name: numberofemployees
        description: Number of employees in the account company, used to populate employee_segment_c

      - name: annualrevenue
        description: annual revenue of the company

      - name: ownerid
        description: Salesforce id of the owner of the account, id of an Vidyard account executive, not a user
        tests:
          - unique
          - not_null

      - name: customer_tier__c
        description: Customer tiers assigned by CX

      - name: email_domain__c
        description: domain of the company

      - name: website
        description: website address of the account company

      - name: account_id__c
        description: vidyard account id
        tests:
          - unique
          - not_null

      - name: original_contract_date__c
        description: start date of the original contract of the account with Vidyard

      - name: csm_owner__c
        description: salesforce user id of the CSM owner for the account
        tests:
          - unique
          - not_null

      - name: ispersonaccount
        description: T/F; True if self-serve, False if enterprise customer

      - name: self_serve_customer__c
        description: whether a customer is self-serve or not; based on the most recent
          oppotunity the account closed with VY, not accurate for customers with active
          contracts AND active self serve; used to be used for HubSpot customers; legacy
          field probably

      - name: billingstreet
        description: 'billing street of the company '

      - name: billingcity
        description: billing city of the account company

      - name: billingstate
        description: billing state of the account company

      - name: billingpostalcode
        description: billing postal code of the account company

      - name: billingcountry
        description: billing country of the account company

      - name: ispartner
        description: If the account is a Vidyard partner or not

      - name: date_of_churn__c
        description: date when customers churn

      - name: churn_reason__c
        description: reason of churn for customers

      - name: churn_reason_details__c
        description: details reasons of churns for customers

      - name: partner_type2__c
        description: Type of partners

      - name: zvidyard_Account_Products__c
        description: description of the typ of product the account is under; used to calculate
          many boolean fields for type of the account(for enterprise, for business, for
          teams, etc)

      - name: created_datetime__c
        description: date and time of when the account was created

      - name: new_territory__c
        description: 'Refers to sales reps'' territories: sub-categories under commercial
          and emerging. What category does the account fall under size wise for the reps
          to work on. e.g. LE = Large Enterprise; KA = Key Accounts'

      - name: region__c
        description: the region the account is from; picklist in Salesforce - NA East,
          NA West, NA Unknown, EMEA, APAC, LATAM

      - name: non_contract__c
        description: really really old customers who paid us by credit card, but not self
          serve; legacy field

      - name: vidyard_user_id__pc
        description: vidyard user id
        tests:
          - unique
          - not_null

      - name: crm__c
        description: CRM tool the account uses

      - name: marketing_automation_platform__c
        description: the marketing automation platform used by the acconut

      - name: abm_tier__c
        description: customer tier in ABM program

      - name: online_video_platform__c
        description: online video platform used by the account

      - name: non_contract__c
        description: really really old customers who paid us by credit card, but not self
          serve; legacy

      - name: primary_use_case__c
        description: the account's primary use case for vidyard (e.g. corporate comms,
          hosting, sales etc)

      - name: qa_status__c
        description: status of an account that has been deemed qualified to act on by
          marketing (via a picklist)

  - name: stg_salesforce_contact
    columns:

      - name: id
        description: Unique identifier generated by salesforce for the contact
        tests:
          - unique
          - not_null

      - name: isdeleted
        description: T|F for if the contact is deleted

      - name: accountid
        description: The account id that the contact is associated with
        tests:
          - unique
          - not_null

      - name: vidyard_user_id__c
        description: The vidyard user id of the contact if the user has a vidyard account

      - name: createddate
        description: The date the contact was created

      - name: account_owner_id__c
        description: account owner id

      - name: ownerid
        description: contact owner id

      - name: lastname
        description: Last name of the contact

      - name: firstname
        description: First name of the contact

      - name: name
        description: Full name of the contact

      - name: email
        description: The contact's email

      - name: title
        description: The contact's job title

      - name: role__c
        description: The contact's level in their company

      - name: job_role__c
        description: The contact's role in their company

      - name: department__c
        description: The contact's department in their company

      - name: account_lead_type__c
        description: Description on what type of lead the Contact is it is e.g. Prospect,
          Former Customer

      - name: leadsource
        description: Source of where the contact originated

      - name: baller_score__c
        description: Contact's lead score calculated in salesforce

      - name: contact_status_vy__c
        description: Current status of the contact, e.g. Called

      - name: status_reason__c
        description: Reason for a particular status assigned to the contact

      - name: main_csm_contact__c
        description: csm contact

      - name: marketing_automation_platform__c
        description: Which marketing platform the lead uses

      - name: crm__c
        description: Which CRM platform the lead uses

      - name: mailingstreet
        description: also used as billing information for the contact

      - name: mailingcity
        description: also used as billing information for the contact

      - name: mailingstate
        description: also used as billing information for the contact

      - name: mailingpostalcode
        description: also used as billing information for the contact

      - name: mailingcountry
        description: also used as billing information for the contact


  - name: stg_salesforce_campaign
    columns:

      - name: id
        description: salesforce id for the campaign

      - name: isdeleted
        description: True if the campaign is deleted

      - name: name
        description: name of the campaign

      - name: parentid
        description: parent campaign id

      - name: type
        description: the type of campaign - in progress, planned, completed, aborted

      - name: status
        description: 'status of the campaign - '

      - name: startdate
        description: start date of the campaign

      - name: enddate
        description: end date of the campaign

      - name: expectedrevenue
        description: expected revenue of the campaign

      - name: budgetedcost
        description: budgeted cost for the campaign

      - name: actualcost
        description: actual cost of the campaign

      - name: isactive
        description: T/F if the campaign is still active

      - name: description
        description: description of the campaign

      - name: createddate
        description: created date of the campaign

      - name: media_type__c
        description: type of media - owned, paid, other earned, blank

      - name: inbound_vs_outbound__c
        description: inbound vs outbound of the campaign

      - name: cta__c
        description: cta type of the campaign

      - name: cta_subtype__c
        description: cta sub-type of the campaign

      - name: channel_picklist__c
        description: channel of the campaign

      - name: channel_detail__c
        description: details of the channel of the campaign

      - name: channel_media_type__c
        description: media type of the channel of the campaign

      - name: campaign_sourced_by__c
        description: campaign sourced by - product, partner, sales, marketing

      - name: response_type__c
        description: MQL versus non-MQL      

       