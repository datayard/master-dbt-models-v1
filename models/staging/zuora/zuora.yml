version: 2

sources:
  - name: zuora
    description: Zuora Tables
    
    freshness:
      warn_after:
        period: hour
        count: 12
      error_after:
        period: hour
        count: 24

    tables:

      - name: account

      - name: contact

      - name: subscription

      - name: product

      - name: product_rate_plan

      - name: rate_plan

      - name: rate_plan_charge

      - name: rate_plan_charge_tier

models:
    # Documentation for ACCOUNT table from ZUORA schema
    - name: stg_zuora_account
      columns:
        - name: accountId
          description: Unique Identifier Generated by Zuora for the Account
          tests:
            - not_null
            - unique

        - name: accountNumber
          description: Unique Identifier Generated by Zuora for the Account

        - name: createdById
          description: Identifier of Zuora user who created account

        - name: createdDate
          description: Date of when account was created

        - name: crmId
          description: Corresponding Salesforce Account ID

        - name: customerAcquisitionDate
          description: Date of Acquisiton

        - name: cxDepartment
          description: Enterprise Department Type

        - name: net_mrr
          description: MRR of the contract

        - name: accountName
          description: Name of the account

        - name: accountStatus
          description: Current Status of Account

        - name: salesRepName
          description: Name of AE who sold the contract

        - name: vidyardId
          description: Corresponding Vidyard Account ID

        - name: soldToContactId
          description: Identifier of Zuora buyer contact

        - name: billToContactId
          description: Identifier of Zuora bill recipient contact

        - name: updatedById
          description: Identifier of Zuora user who updated account last

        - name: updatedDate
          description: Date of when account was last updated

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: fivetranSynced
          description: Date when fivetran synced record

    # Documentation for CONTACT table from ZUORA 
    - name: stg_zuora_contact
      columns:
        - name: contactId
          description: Unique Identifier Generated by Zuora for the Contact
          tests: 
            - unique
            - not_null

        - name: accountId
          description: Identifier for the associated Zuora account

        - name: createdById
          description: Identifier of Zuora user who created contact

        - name: createdDate
          description: Date of when contact was created

        - name: city
          description: City of contact

        - name: country
          description: Country of contact

        - name: firstName
          description: First name of contact

        - name: lastName
          description: Last name of contact

        - name: personalEmail
          description: Non-work email of contact

        - name: postalCode
          description: Postal code of contact

        - name: state
          description: State of contact

        - name: workEmail
          description: Work email of contact

        - name: updatedById
          description: Identifier of Zuora user who updated contact last

        - name: updatedDate
          description: Date of when contact was last updated

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: fivetranSynced
          description: Date when fivetran synced record

    # Documentation for SUBSCRIPTION table from ZUORA
    - name: stg_zuora_subscription
      columns:
        - name: subscriptionId
          description: Unique Identifier Generated by Zuora for the Subscription
          tests:
            - unique
            - not_null

        - name: accountId
          description: Identifier for the corresponding account

        - name: cancelledDate
          description: Date when subscription effectively cancelled

        - name: contractStartDate
          description: Date when subscription begins

        - name: createdById
          description: Identifier of Zuora user who created subscription

        - name: createdDate
          description: Date of when subscription was created

        - name: currentTerm
          description: Number of months or years (see below) for pro subscription term

        - name: currentTermPeriodType
          description: Designates if subscription is a month or year-based subscription

        - name: initialTerm
          description: Number of months or years (see below) for first pro subscription term

        - name: initialTermPeriodType
          description: Designates if first subscription is a month or year-based subscription

        - name: name
          description: Name of subscription

        - name: originalCreatedDate
          description: Date of when first subscription was created

        - name: originalSubscriptionId
          description: ID of the original subscription on account

        - name: previousSubscriptionId
          description: Identifier for the previous subscription on the account

        - name: renewalTerm
          description: Number of months or years (see below) for renewal subscription term

        - name: renewalTermPeriodType
          description: Designates if renewal subscription is a month or year-based subscription

        - name: status
          description: Is subsciption active or expired

        - name: subscriptionEndDate
          description: Date subscription ends

        - name: subscriptionStartDate
          description: Date subscription starts

        - name: termEndDate
          description: Date term ends

        - name: termStartDate
          description: Date term starts

        - name: termType
          description: Is subscription termed or evergreen

        - name: updatedById
          description: ID of user who updated subscription last

        - name: updatedDate
          description: Date when subscription was last updated

        - name: vidyardCancelDate
          description: ' '

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: soldToContactId
          description: ID of associated contact who purchased subscription

        - name: subscriptionVersionAmendmentId
          description: ID of amendment for the associated version of the subscription

        - name: defaultPaymentMethodId
          description: ID of payment which is default method on subscription

        - name: billToContactId
          description: ID of contact who should be billed for subscription

    # Documentation for PRODUCT table from ZUORA 
    - name: stg_zuora_product
      columns:
        - name: productId
          description: Unique product identifier assigned by Zuora
          tests: 
            - unique
            - not_null

        - name: allowFeatureChanges
          description: ' '

        - name: category
          description: Vidyard related package to what this product relates to

        - name: createdById
          description: The ID of the user in Zuora that created the product

        - name: createdDate
          description: Object created date

        - name: description
          description: General description of what the product is

        - name: effectiveEndDate
          description: Time frame (End) in which the product will be valid for offering  

        - name: effectiveStartDate
          descpription: Time frame (Start) in which the product will be valid for offering 

        - name: name
          description: User friendly name of the product (Matches to what Marketing and sales offer)

        - name: optionalFor
          description: ' '

        - name: planType
          description: Package level in which this product is offered 

        - name: priceBook
          description: The price book to what this product is configured to use 

        - name: sku
          description: Internal Vidyard generated identifier for this product

        - name: subCategory
          description: Type of offering inside Vidyard defined packages

        - name: updatedById
          description: ' '

        - name: updatedDate

    # Documentation for PRODUCT_RATE_PLAN table from ZUORA 
    - name: stg_zuora_product_rate_plan
      columns:
        - name: productRatePlanId
          description: Zuora Generated unique identifier
          tests: 
            - unique
            - not_null

        - name: activeCurrencies
          description: Currency in which the plan is calculated

        - name: CreatedById
          description: User ID of the admin who created the package

        - name: createdDate
          description: Creation Date

        - name: description
          description: Long text form that describes the different rate plan created for the product

        - name: effectiveEndDate
          description: Final date of validity for this price plan

        - name: effectiveStartDate
          description: Start date of validity for plan

        - name: name
          description: General name for Rate plan

        - name: productId
          description: Identifier that links the product to the rate plan

        - name: UpdatedByID
          description: User ID of the last user that updated the package

        - name: updatedDate
          description: Last Updated Date

        - name: visible
          description: Flag that defines the availability for clients to see the offering

        - name: billingPeriod
          description: Billing timeframe in which this plan is applied

        - name: pvStatus
          description: Unique for Personalized Video that defines the type of customer for the rate plan

    # Documentation for RATE_PLAN table from ZUORA 
    - name: stg_zuora_rate_plan
      columns:
        - name: ratePlanID
          description: Unique Identifier Generated by Zuora
          tests: 
            - unique
            - not_null

        - name: amendmentID
          description: Amendment ID attached to Rate plan 

        - name: amendmentSubscriptionRatePlanId
          description: ' '
        
        - name: amendmentType
          description: The type of amendment installed on subscription

        - name: createdById
          description: ID of user that created Rate plan

        - name: createdDate
          description: Creation Date

        - name: name
          description: Name of the rate plan

        - name: productRatePlanId
          description: ID of the rate plan linked to the Product 

        - name: subscriptionId
          description: Subscription ID linked to Rate plan

        - name: updatedbyId
          description: Id of User that Updated

        - name: updatedDate
          description: last updated date

        - name: soldToContactId
          description: ID of contact that rate plan was Sold to

        - name: accountId
          description: Account Id attached to Rate plan

        - name: productId
          description: Product ID attached to rateplan

        - name: billtoContactId
          description: ID of contact that rate plan was billed to

        - name: subscriptionVersionAmendmentId
          description: Amendment version

        - name: defaultPaymentMethodId

        - name: triggerSync

        - name: parentAccountId

    # Documentation for RATE_PLAN_CHARGE table from ZUORA 
    - name: stg_zuora_rate_plan_charge
      columns:
        - name: rateplanchargeid
          tests:
            - unique
            - not_null

        - name: ratePlanID

        - name: mrr

        - name: chargemodel

    - name: stg_zuora_rate_plan_charge_tier
      columns:
        - name: rateplanchargetierid
          tests:
            - unique
            - not_null
<<<<<<< HEAD

        - name: rateplanchargeid
=======
>>>>>>> 7d0853c2c25fb1a4e59259600d6b9ba8d6fe19ea
        
        - name: discountpercentage

