version: 2

sources:
  - name: zuora
    description: Zuora Tables
    
    freshness:
      warn_after:
        period: hour
        count: 12
      error_after:
        period: hour
        count: 24

    tables:

      - name: account

      - name: contact

      - name: subscription

      - name: product

      - name: rate_plan

models:
    # Documentation for ACCOUNT table from ZUORA schema
    - name: stg_zuora_account
      columns:
        - name: accountId
          description: Unique Identifier Generated by Zuora for the Account
          tests:
            - not_null
            - unique

        - name: accountNumber
          description: Unique Identifier Generated by Zuora for the Account

        - name: createdById
          description: Identifier of Zuora user who created account

        - name: createdDate
          description: Date of when account was created

        - name: crmId
          description: Corresponding Salesforce Account ID

        - name: customerAcquisitionDate
          description: Date of Acquisiton

        - name: cxDepartment
          description: Enterprise Department Type

        - name: net_mrr
          description: MRR of the contract

        - name: accountName
          description: Name of the account

        - name: salesRepName
          description: Name of AE who sold the contract

        - name: vidyardId
          description: Corresponding Vidyard Account ID

        - name: soldToContactId
          description: Identifier of Zuora buyer contact

        - name: billToContactId
          description: Identifier of Zuora bill recipient contact

        - name: updatedById
          description: Identifier of Zuora user who updated account last

        - name: updatedDate
          description: Date of when account was last updated

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: fivetranSynced
          description: Date when fivetran synced record

    # Documentation for CONTACT table from ZUORA 
    - name: stg_zuora_contact
      columns:
        - name: contactId
          description: Unique Identifier Generated by Zuora for the Contact
          tests: 
            - unique
            - not_null

        - name: accountId
          description: Identifier for the associated Zuora account

        - name: createdById
          description: Identifier of Zuora user who created contact

        - name: createdDate
          description: Date of when contact was created

        - name: city
          description: City of contact

        - name: country
          description: Country of contact

        - name: firstName
          description: First name of contact

        - name: lastName
          description: Last name of contact

        - name: personalEmail
          description: Non-work email of contact

        - name: postalCode
          description: Postal code of contact

        - name: state
          description: State of contact

        - name: workEmail
          description: Work email of contact

        - name: updatedById
          description: Identifier of Zuora user who updated contact last

        - name: updatedDate
          description: Date of when contact was last updated

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: fivetranSynced
          description: Date when fivetran synced record

    # Documentation for SUBSCRIPTION table from ZUORA
    - name: stg_zuora_subscrip
      columns:
        - name: subscriptionId
          description: Unique Identifier Generated by Zuora for the Subscription
          tests:
            - unique
            - not_null

        - name: accountId
          description: Identifier for the corresponding account

        - name: cancelledDate
          description: Date when subscription effectively cancelled

        - name: contractStartDate
          description: Date when subscription begins

        - name: createdById
          description: Identifier of Zuora user who created subscription

        - name: createdDate
          description: Date of when subscription was created

        - name: currentTerm
          description: Number of months or years (see below) for pro subscription term

        - name: currentTermPeriodType
          description: Designates if subscription is a month or year-based subscription

        - name: initialTerm
          description: Number of months or years (see below) for first pro subscription term

        - name: initialTermPeriodType
          description: Designates if first subscription is a month or year-based subscription

        - name: name
          description: Name of subscription

        - name: originalCreatedDate
          description: Date of when first subscription was created

        - name: originalSubscriptionId
          description: ID of the original subscription on account

        - name: previousSubscriptionId
          description: Identifier for the previous subscription on the account

        - name: renewalTerm
          description: Number of months or years (see below) for renewal subscription term

        - name: renewalTermPeriodType
          description: Designates if renewal subscription is a month or year-based subscription

        - name: status
          description: Is subsciption active or expired

        - name: subscriptionEndDate
          description: Date subscription ends

        - name: subscriptionStartDate
          description: Date subscription starts

        - name: termEndDate
          description: Date term ends

        - name: termStartDate
          description: Date term starts

        - name: termType
          description: Is subscription termed or evergreen

        - name: updatedById
          description: ID of user who updated subscription last

        - name: updatedDate
          description: Date when subscription was last updated

        - name: vidyardCancelDate
          description: ' '

        - name: fivetranDeleted
          description: Flag when fivetran deletes record

        - name: soldToContactId
          description: ID of associated contact who purchased subscription

        - name: subscriptionVersionAmendmentId
          description: ID of amendment for the associated version of the subscription

        - name: defaultPaymentMethodId
          description: ID of payment which is default method on subscription

        - name: billToContactId
          description: ID of contact who should be billed for subscription


    

